---
global:
  scrape_interval: {{ prometheus_scrape_interval }}
  evaluation_interval: {{ prometheus_evaluation_interval }}

scrape_configs:
  - job_name: 'prometheus'
    static_configs:
      - targets: ['localhost:9090']

{% for target in prometheus_targets %}
  - job_name: '{{ target.name }}'
    static_configs:
      - targets: {{ target.targets | to_json }}
        labels:
          {% for key, value in target.labels.items() %}
          {{ key }}: "{{ value }}"
          {% endfor %}
{% endfor %}